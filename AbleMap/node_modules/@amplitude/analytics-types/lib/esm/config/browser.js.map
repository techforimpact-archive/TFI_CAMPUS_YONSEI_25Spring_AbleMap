{"version":3,"file":"browser.js","sourceRoot":"","sources":["../../../src/config/browser.ts"],"names":[],"mappings":"","sourcesContent":["import { UserSession } from '../user-session';\nimport { IdentityStorageType, Storage } from '../storage';\nimport { Transport } from '../transport';\nimport { Config } from './core';\nimport { PageTrackingOptions } from '../page-view-tracking';\nimport { ElementInteractionsOptions } from '../element-interactions';\n\nexport interface BrowserConfig extends ExternalBrowserConfig, InternalBrowserConfig {}\n\nexport interface ExternalBrowserConfig extends Config {\n  /**\n   * An app version for events tracked. This can be the version of your application.\n   * @defaultValue `undefined`\n   */\n  appVersion?: string;\n  /**\n   * @deprecated This property is deprecated and will be removed in future versions. Please migrate to using `autocapture` instead.\n   * The default event tracking configuration.\n   * See {@link https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events}.\n   * @defaultValue `true`\n   */\n  defaultTracking?: boolean | DefaultTrackingOptions;\n  /**\n   * The configurations for auto-captured events.\n   * See {@link https://www.docs.developers.amplitude.com/data/sdks/browser-2/autocapture/}.\n   */\n  autocapture?: boolean | AutocaptureOptions;\n  /**\n   * The identifier for the device running your application.\n   * @defaultValue `UUID()`\n   */\n  deviceId?: string;\n  /**\n   * Configuration for cookie.\n   */\n  cookieOptions?: CookieOptions;\n  /**\n   * The storage for user identify.\n   * @defaultValue `\"cookie\"`\n   */\n  identityStorage?: IdentityStorageType;\n  /**\n   * The partner identifier.\n   * Amplitude requires the customer who built an event ingestion integration to add the partner identifier to partner_id.\n   * @defaultValue `undefined`\n   */\n  partnerId?: string;\n  /**\n   * The custom Session ID for the current session.\n   * @defaultValue `timestamp`\n   */\n  sessionId?: number;\n  /**\n   * The period of inactivity from the last tracked event before a session expires in milliseconds.\n   * @defaultValue `1,800,000` (30 minutes)\n   */\n  sessionTimeout: number;\n  /**\n   * The configurations for tracking additional properties.\n   * See {@link https://www.docs.developers.amplitude.com/data/sdks/browser-2/#optional-tracking}.\n   */\n  trackingOptions: TrackingOptions;\n  /**\n   * Network transport mechanism used to send events.\n   * @defaultValue `\"fetch\"`\n   */\n  transport?: 'fetch' | 'xhr' | 'beacon';\n  /**\n   * The identifier for the user being tracked.\n   * @defaultValue `undefined`\n   */\n  userId?: string;\n  /**\n   * User's Nth instance of performing a default Page Viewed event within a session.\n   * Used for landing page analysis.\n   */\n  pageCounter?: number;\n  /**\n   * Whether to fetch remote configuration.\n   * @defaultValue `false`\n   */\n  fetchRemoteConfig?: boolean;\n}\n\ninterface InternalBrowserConfig {\n  cookieStorage: Storage<UserSession>;\n  lastEventTime?: number;\n  lastEventId?: number;\n  transportProvider: Transport;\n}\n\n/**\n * @deprecated This interface is deprecated and will be removed in future versions. Please migrate to using `AutocaptureOptions` instead.\n */\nexport interface DefaultTrackingOptions {\n  /**\n   * Enables/disables marketing attribution tracking or config with detailed attribution options.\n   * @defaultValue `true`\n   */\n  attribution?: boolean | AttributionOptions;\n  /**\n   * Enables/disables form downloads tracking.\n   * @defaultValue `true`\n   */\n  fileDownloads?: boolean;\n  /**\n   * Enables/disables form interaction tracking.\n   * @defaultValue `true`\n   */\n  formInteractions?: boolean;\n  /**\n   * Enables/disables default page view tracking.\n   * @defaultValue `true`\n   */\n  pageViews?: boolean | PageTrackingOptions;\n  /**\n   * Enables/disables session tracking.\n   * @defaultValue `true`\n   */\n  sessions?: boolean;\n}\n\nexport interface AutocaptureOptions {\n  /**\n   * Enables/disables marketing attribution tracking or config with detailed attribution options.\n   * @defaultValue `true`\n   */\n  attribution?: boolean | AttributionOptions;\n  /**\n   * Enables/disables form downloads tracking.\n   * @defaultValue `true`\n   */\n  fileDownloads?: boolean;\n  /**\n   * Enables/disables form interaction tracking.\n   * @defaultValue `true`\n   */\n  formInteractions?: boolean;\n  /**\n   * Enables/disables default page view tracking.\n   * @defaultValue `true`\n   */\n  pageViews?: boolean | PageTrackingOptions;\n  /**\n   * Enables/disables session tracking.\n   * @defaultValue `true`\n   */\n  sessions?: boolean;\n  /**\n   * Enables/disables user interactions tracking.\n   * @defaultValue `false`\n   */\n  elementInteractions?: boolean | ElementInteractionsOptions;\n}\n\nexport interface TrackingOptions {\n  /**\n   * Enables/disables ip address tracking.\n   * @defaultValue `true`\n   */\n  ipAddress?: boolean;\n  /**\n   * Enables/disables language tracking.\n   * @defaultValue `true`\n   */\n  language?: boolean;\n  /**\n   * Enables/disables platform tracking.\n   * @defaultValue `true`\n   */\n  platform?: boolean;\n}\n\nexport interface AttributionOptions {\n  /**\n   * The rules to determine which referrers are excluded from being tracked as traffic source.\n   * @defaultValue `[/your-domain\\.com$/]`\n   */\n  excludeReferrers?: (string | RegExp)[];\n  /**\n   * The value to represent undefined/no initial campaign parameter for first-touch attribution.\n   * @defaultValue `\"EMPTY\"`\n   */\n  initialEmptyValue?: string;\n  /**\n   * The flag of if Amplitude to start a new session if any campaign parameter changes.\n   * @defaultValue `false`\n   */\n  resetSessionOnNewCampaign?: boolean;\n}\n\nexport interface CookieOptions {\n  /**\n   * The domain property of cookies created.\n   * @defaultValue `Your top level domain`\n   */\n  domain?: string;\n  /**\n   * The expiration of cookies created in days.\n   * @defaultValue `365`\n   */\n  expiration?: number;\n  /**\n   * How cookies are sent with cross-site requests.\n   * @defaultValue `\"Lax\"`\n   */\n  sameSite?: 'Strict' | 'Lax' | 'None';\n  /**\n   * The flag of if send cookies over secure protocols.\n   * @defaultValue `false`\n   */\n  secure?: boolean;\n  /**\n   * The flag of if upgrade the cookies created by maintenance Browser SDK.\n   * @defaultValue `true`\n   */\n  upgrade?: boolean;\n}\n\ntype HiddenOptions = 'apiKey' | 'transportProvider' | 'requestMetadata';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface BrowserOptions extends Omit<Partial<ExternalBrowserConfig>, HiddenOptions> {}\n\nexport type BrowserRemoteConfig = {\n  browserSDK: {\n    autocapture?: AutocaptureOptions | boolean;\n  };\n};\n"]}